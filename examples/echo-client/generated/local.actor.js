"use strict";
// DO NOT EDIT.
// Generated by actr-ts-codegen.
Object.defineProperty(exports, "__esModule", { value: true });
exports.dispatchLocalActor = void 0;

const dist = require('../../../dist/index.js');
const ECHO_ROUTE_KEY = require('./echo.client').ECHO_ROUTE_KEY;
const ECHOTWICE_ROUTE_KEY = require('./echo_twice.client').ECHOTWICE_ROUTE_KEY;

const RPC_TIMEOUT_MS = 15000;
const RPC_PAYLOAD_TYPE = 0;

const ROUTES = [
  {
    routeKey: ECHO_ROUTE_KEY,
    targetType: {"manufacturer":"acme","name":"EchoService"},
  },
  {
    routeKey: ECHOTWICE_ROUTE_KEY,
    targetType: {"manufacturer":"acme","name":"EchoTwiceService"},
  },
];

async function dispatchLocalActor(ctx, envelope) {
  const match = ROUTES.find((route) => route.routeKey === envelope.routeKey);
  if (!match) {
    throw new Error(`Unknown route: ${envelope.routeKey}`);
  }

  const targetId = await ctx.discover(match.targetType);
  return await ctx.callRaw(
    targetId,
    envelope.routeKey,
    RPC_PAYLOAD_TYPE,
    envelope.payload,
    RPC_TIMEOUT_MS
  );
}
exports.dispatchLocalActor = dispatchLocalActor;